var D,S;class n{constructor(e,s,t){this.id=e,this.arrayID=t+(this.id.charCodeAt(0)-65),this.coords=s}}class C{constructor(e,s){this.x=e,this.y=s,this.shapes=[],this.createShapes(),this.numOfIDColumns=this.shapes.length,this.colIDs=[...Array(this.x*this.y+this.numOfIDColumns).keys()],this.fullBoard=this.buildBoard(),this.board=this.fullBoard}createShapes(){this.shapes.push(new n("A",[[1,1,1,0,0,0,0,0,0,0,0,1,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1],[1,0,1,0,0,0,0,0,0,0,0,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1]],this.x*this.y)),this.shapes.push(new n("B",[[0,0,1,1,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1],[0,1,1,1,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("C",[[0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1],[0,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("D",[[0,1,0,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("E",[[0,1,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("F",[[0,1,1,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("G",[[0,1,1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("H",[[1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,1]],this.x*this.y)),this.shapes.push(new n("I",[[1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1]],this.x*this.y)),this.shapes.push(new n("J",[[1,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1]],this.x*this.y)),this.shapes.push(new n("K",[[1,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,0,0,0,1],[1,1,0,0,0,0,0,0,0,0,0,0,1],[0,1,0,0,0,0,0,0,0,0,0,0,1,1]],this.x*this.y)),this.shapes.push(new n("L",[[1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1],[0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1],[1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1],[0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1]],this.x*this.y))}buildBoard(){var e=new Array;return this.shapes.forEach(s=>{for(var t=!1,o=0,h=0;!t;)if(h+s.coords[o].length-1<this.x*this.y){const i=new Array(this.x*this.y+this.numOfIDColumns).fill(0);i[s.arrayID]=1,Array.prototype.splice.apply(i,[h,s.coords[o].length].concat(s.coords[o])),e.push([...i]),h++}else h=0,++o>s.coords.length-1&&(t=!0)}),e}prePlace(e){var s=new Set(e.flat());s.delete(0);var t=Array.from(s),o=new Array;t.forEach(i=>{var a=[...new Array];a.push(i.charCodeAt(0)-65+55),e.flat().forEach((l,u)=>{"string"==typeof l&&a.push(u)}),o.push([...a])});const h=new Array;return o.forEach(i=>{const a=[];D.board.forEach(f=>{i.some(p=>1===f[p])||a.push(f.filter((p,w)=>!i.includes(w)))}),this.board=[...a];const l=[],u=[];this.colIDs.forEach((f,p)=>{i.includes(p)?u.push(f):l.push(f)}),h.push([...u]),this.colIDs=[...l]}),h}getBlankSolutions(){var e=new Array;return e.info={ranOutOfTime:!1,foundMaxSolutions:!1,dfs:0},e}solve(e,s,t){var o=[];return void 0!==e&&(o=[...this.prePlace(e)]),this.convertOutput(I(this,s||null,this.getBlankSolutions(),o,t?(new Date).getTime()+t:void 0))}getLetterFromRow(e){return String.fromCharCode(e.slice(this.x*this.y).indexOf(1)+65)}getLetterFromArrayID(e){return String.fromCharCode(e-55+65)}convert1Dto2D(e){for(var s=[];e.length;)s.push([...e.splice(0,this.y)]);return s}convertOutput(e){var s=new Array;return e.forEach(t=>{var o=[...new Array(this.x*this.y).fill(0)];for(let h=0;h<t.length;h++){const i=[...t[h]],a=this.getLetterFromArrayID(i.pop());i.forEach(l=>{o[l]=a})}s.push(this.convert1Dto2D(o))}),s}reset(){this.board=this.fullBoard}calculateColCount(e){var s=new Array(e).fill(0);return this.board.forEach(t=>{t.forEach((o,h)=>{1==o&&s[h]++})}),s}returnSmallestColumns(e){var s=new Array;return this.board.forEach((t,o)=>{1==t[e]&&s.push(o)}),s}}function I(r,e,s,t,o){if(console.warn("currentDFS",s.info.dfs),s.info.ranOutOfTime&&null!=o&&o<(new Date).getTime())console.error("ranOutOfTime"),s.info.ranOutOfTime=!0;else if(s.info.foundMaxSolutions)console.error("maxSolutions Found");else if(0==r.colIDs.length)console.warn("push to temp"),s.push([...t]);else{var h=[...r.calculateColCount(r.colIDs.length).sort()];console.log("colCounts",h);var i=h[0];if(0===i)console.error("colOfLowestSum = 0");else{const l=[...r.returnSmallestColumns(h.indexOf(i))];for(let u=0;u<l.length;u++){const f=[...r.board],p=[...r.colIDs];console.log("colIDs-first",r.colIDs),console.log("board-first",r.board);const w=[...r.board[l[u]]],d=new Array;w.forEach((c,y)=>{1==c&&d.push(y)});const m=[],v=[];r.colIDs.forEach((c,y)=>{d.includes(y)?v.push(c):m.push(c)}),t.push([...v]),console.info("tempSolution",t),r.colIDs=[...m],console.log("colIDs-afterremoval",r.colIDs),s.info.dfs++;const g=[];if(r.board.forEach((c,y)=>{d.some(x=>1===c[x])||g.push(c.filter((x,A)=>!d.includes(A)))}),r.board=[...g],console.log("board after removal",r.board),s=I(r,e,s,t,o),console.info("solutions",s),r.board=[...f],r.colIDs=[...p],t.pop(),s.info.dfs--,null!=e&&s.length>=e){console.error("MaxSolutions FOund"),s.info.foundMaxSolutions=!0;break}}}}return s}export function solveX(r,e,s){return(D=new C(5,11)).solve(r,e,s)}